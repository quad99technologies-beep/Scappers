# ============================================
# Malaysia Medicine Price Scraper - Configuration Template
# ============================================
# INSTRUCTIONS:
# 1. Copy this file to the appropriate location:
#    - RECOMMENDED: %USERPROFILE%\Documents\ScraperPlatform\config\Malaysia.env.json
#      (use same keys as below; JSON format: "SCRIPT_01_URL": "https://...")
#    - LEGACY: config/Malaysia.env (or .env in script dir)
# 2. Replace placeholder values with your actual values
# 3. NEVER commit the actual config with real secrets to git!
# All pipeline data is stored in PostgreSQL (run_ledger, my_products, etc.).
# ============================================

# ============================================
# Step 01: Product Registration Number (MyPriMe)
# ============================================
SCRIPT_01_URL=https://pharmacy.moh.gov.my/ms/apps/drug-price
SCRIPT_01_HEADLESS=false
SCRIPT_01_OUT_DIR=../output
SCRIPT_01_WAIT_TIMEOUT=20
SCRIPT_01_CLICK_DELAY=2
SCRIPT_01_CHROME_START_MAXIMIZED=--start-maximized
SCRIPT_01_CHROME_DISABLE_AUTOMATION=--disable-blink-features=AutomationControlled
SCRIPT_01_TABLE_SELECTOR=table.tinytable
SCRIPT_01_HEADER_SELECTOR=thead th
SCRIPT_01_ROW_SELECTOR=tbody tr
SCRIPT_01_CELL_SELECTOR=td
SCRIPT_01_VIEW_ALL_XPATH=//a[@href='javascript:sorter.showall()' or contains(translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'view all') or contains(translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'lihat semua')]

# ============================================
# Script 02: Product Details
# ============================================
SCRIPT_02_BASE_DIR=../
SCRIPT_02_INPUT_PRODUCTS=input/products.csv
SCRIPT_02_INPUT_MALAYSIA=output/malaysia_drug_prices_view_all.csv
SCRIPT_02_OUT_DIR=output
SCRIPT_02_OUT_BULK=quest3_bulk_results.csv
SCRIPT_02_OUT_MISSING=quest3_missing_regnos.csv
SCRIPT_02_OUT_FINAL=quest3_product_details.csv
SCRIPT_02_SEARCH_URL=https://quest3plus.bpfk.gov.my/pmo2/index.php
SCRIPT_02_DETAIL_URL=https://quest3plus.bpfk.gov.my/pmo2/detail.php?type=product&id={}
SCRIPT_02_WAIT_BULK=25
SCRIPT_02_SEARCH_DELAY=5
SCRIPT_02_DETAIL_DELAY=3
SCRIPT_02_INDIVIDUAL_DELAY=3
SCRIPT_02_PAGE_TIMEOUT=60000
SCRIPT_02_SELECTOR_TIMEOUT=5000
SCRIPT_02_HEADLESS=false

# ============================================
# Script 03: Consolidate Results
# ============================================
SCRIPT_03_OUTPUT_BASE_DIR=../output
SCRIPT_03_QUEST3_DETAILS=quest3_product_details.csv
SCRIPT_03_CONSOLIDATED_FILE=consolidated_products.csv

# ============================================
# Script 04: Get Fully Reimbursable
# ============================================
SCRIPT_04_BASE_URL=https://pharmacy.moh.gov.my/ms/apps/fukkm
SCRIPT_04_OUTPUT_DIR=../output
SCRIPT_04_OUT_CSV=malaysia_fully_reimbursable_drugs.csv
SCRIPT_04_TABLE_SELECTOR=table.views-table.cols-7
SCRIPT_04_REQUEST_TIMEOUT=30
SCRIPT_04_PAGE_DELAY=0.04
SCRIPT_04_FAIL_FAST=false
SCRIPT_04_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36
# Retry configuration (safety limits to prevent infinite loops)
SCRIPT_04_PAGE_MAX_RETRIES=3
SCRIPT_04_RETRY_BASE_DELAY=2.0
SCRIPT_04_RETRY_MAX_DELAY=60.0

# ============================================
# Step 05: Generate PCID Mapped (from DB)
# ============================================
SCRIPT_05_BASE_DIR=../
SCRIPT_05_INPUT_DIR=input
SCRIPT_05_OUTPUT_DIR=output
SCRIPT_05_PCID_MAPPING=PCID Mapping - Malaysia.csv
SCRIPT_05_DEFAULT_VAT_PERCENT=0.0
# Product lookup key: single column (default) or composite key (special chars removed in SQL).
# Default: registration_no only.
# For composite key (run_id + registration_no + product_name + generic_name + dosage_form + strength):
#   SCRIPT_05_LOOKUP_KEY_COLUMNS_PRODUCTS=run_id,registration_no,product_name,generic_name,dosage_form,strength
SCRIPT_05_LOOKUP_KEY_COLUMNS_PRODUCTS=registration_no
SCRIPT_05_LOOKUP_KEY_COLUMNS_PCID=local_pack_code
SCRIPT_05_FINAL_COLUMNS=
SCRIPT_05_CONSOLIDATED=consolidated_products.csv
SCRIPT_05_PRICES=malaysia_drug_prices_view_all.csv
SCRIPT_05_REIMBURSABLE=malaysia_fully_reimbursable_drugs.csv
SCRIPT_05_OUT_MAPPED=malaysia_pcid_mapped.csv
SCRIPT_05_OUT_NOT_MAPPED=malaysia_pcid_not_mapped.csv
